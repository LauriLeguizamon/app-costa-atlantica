<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Administrador de grupo</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" color="light">
  <ion-list [inset]="true">
    <ion-list-header>Grupo (empresa)</ion-list-header>
    <ion-item>
      <ion-input
        placeholder="Nombre del grupo"
        (ionInput)="changeGroupName($event)"
        [formControl]="groupNameControl"
      ></ion-input>
    </ion-item>
  </ion-list>

  <ion-list [inset]="true">
    <ion-list-header>
      <ion-label>Excursiones</ion-label>
    </ion-list-header>
    <ion-item *ngIf="stateService.group!.tours.length === 0">
      <ion-label>
        <h3>No hay excursiones</h3>
        <p>Para agregar excursiones presiona en "agregar excursiones"</p>
        <span class="text-danger" *ngIf="groupNameControl.invalid"
          >Agrega el nombre del grupo</span
        >
      </ion-label>
    </ion-item>

    <ion-item-sliding *ngFor="let tour of stateService.group!.tours">
      <ion-item-options>
        <ion-item-option (click)="editTourAlert(tour)">Editar</ion-item-option>
        <ion-item-option color="danger" (click)="deleteTourAlert(tour)"
          >Eliminar</ion-item-option
        >
      </ion-item-options>
      <ion-item
        [button]="true"
        [detail]="true"
        (click)="navigateToTour(tour.id)"
      >
        <ion-label>{{tour.name}}</ion-label>
      </ion-item>
    </ion-item-sliding>

    <ion-item lines="none">
      <ion-button
        (click)="createTourAlert()"
        [disabled]="groupNameControl.invalid"
        >Agregar excursion</ion-button
      >
    </ion-item>
  </ion-list>
</ion-content>

<ion-footer>
  <ion-toolbar>
    <ion-button expand="block" (click)="openSummaryModal()"
      >Ver resumen</ion-button
    >
  </ion-toolbar>
</ion-footer>
